"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("shelljs"),e=require("@ronan-try/cli-const"),s=require("child_process");function o(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var r=o(t),i=o(s);const c=(t,e)=>i.default.spawn(t,{cwd:e,shell:!0,stdio:"inherit"}),n=(t,e)=>new Promise((s=>{r.default.exec(e,{cwd:t,silent:!0},((t,e,o)=>s({code:t,stdout:e,stderr:o})))})),a=async t=>n(t,"git remote -v");exports.existGitRepo=t=>new Promise((e=>{r.default.exec("git status",{cwd:t,silent:!0},(t=>e(0===t)))})),exports.gitAddAll=async t=>n(t,"git add ."),exports.gitBranchCurrent=async t=>{const{code:e,stdout:s,stderr:o}=await n(t,"git branch --show-current");if(0===e)return s.trim();process.exit(1)},exports.gitBranchLocal=async t=>n(t,"git branch"),exports.gitBranchR=async t=>n(t,"git branch -r"),exports.gitCheckoutB=async(t,e,s)=>n(t,`git checkout -b ${e} ${s}`),exports.gitCheckoutBSpawn=async(t,e,s)=>new Promise((o=>{c(`git checkout -b ${e}  ${s}`,t).on("close",(t=>{o(t)}))})),exports.gitCheckoutSpawn=async(t,e)=>new Promise((s=>{c(`git checkout ${e}`,t).on("close",(t=>{s(t)}))})),exports.gitCommitM=async(t,e)=>n(t,"git commit -m "+e),exports.gitFetchRepo=async(t,s=e.ROCLI_GIT_UPSTREAM)=>n(t,"git fetch "+s),exports.gitLocalOriginURI=async t=>{const{code:e,stderr:s,stdout:o}=await a(t);0!==e&&(console.log(s),process.exit(1));return o.split(" ")[0].split("\t")[1]},exports.gitMergeTargetToLocal=async(t,e)=>new Promise((s=>{c(`git merge ${e}`,t).on("close",(t=>{s(t)}))})),exports.gitPushOrigin=async(t,e="")=>n(t,`git push origin ${e}`),exports.gitPushOriginU=async(t,e="")=>n(t,`git push -u origin ${e}`),exports.gitRemoteAdd=async(t,s)=>n(t,`git remote add ${e.ROCLI_GIT_UPSTREAM} ${s}`),exports.gitRemoteRemove=async(t,s=e.ROCLI_GIT_UPSTREAM)=>n(t,"git remote remove "+s),exports.gitRemoteV=a;//# sourceMappingURL=index.mini.js.map
